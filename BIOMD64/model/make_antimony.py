import os
# import site
# site.addsitedir(r'D:\tellurium')
import tellurium as te
# from tellurium.utils.misc import ODEExtractor
import tesedml as libsedml
import matplotlib.pyplot as plt

# find the sbml and sedml directories
sbml = os.path.join(os.path.dirname(__file__), 'model.xml')

r = te.loadSBMLModel(sbml)


x = r.getRatesOfChange()
print(x)


print(r.simulate(0, 10, 11))
#                                       GLCi,        G6P ,       F6P ,           F16P,           TRIO,       BPG ,          P3G    ,         P2G    ,   PEP ,           PYR ,           ACE ,        P,              NAD ,          NADH

te_rates_of_changes_t0              = [7.86928894, 46.29403461, -108.83652571, -135.55092418, 370.81078843, 559.34800552, -608.50001547, -68.15681063, 79.81121704, 133.30623792, -1486.13822923, -593.81613491, 1413.3163239, -1413.3163239]
scipy_rates_of_changes_with_odeint  = [7.86928893, 46.29403461, -108.83652571, -135.55092418, 370.81078843, 559.34800552, -608.50001547, -68.15681063, 79.81121704, 133.30623792,  1529.34728874, -593.81613491, -1602.1691940, 1602.16919407]


# ant = r.getAntimony()
#
#
#  
# r = te.loada(ant)
#
# with open('teusink2000.xml', 'wb') as f:
#     f.write(r.getSBML().encode('utf8'))



#




'''

scipy

        GLCi       G6P       F6P      F16P      TRIO       BPG       P3G      P2G       PEP       PYR        ACE         P        NAD       NADH
0   0.087000  2.450000  0.620000  5.510000  0.960000  0.000000  0.900000  0.12000  0.070000  1.850000  0.170000   6.310000  1.200000   0.390000 
1   0.167677  2.441225  0.413059  5.395416  2.867039 -0.001606 -0.246281 -0.02471 -0.087153  2.071793  43.656751 -0.007416 -46.932478  48.522478
2   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
3   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
4   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
5   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
6   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
7   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
8   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
9   0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 
10  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.000000  0.00000  0.000000  0.000000  0.000000   0.000000  0.000000   0.000000 

time,[GLCi],   [G6P],    [F6P],   [F16P],   [TRIO],       [BPG],    [P3G],     [P2G],     [PEP],   [PYR],    [ACE],     [P],   [NAD],    [NADH]
0,     0.087,    2.45,     0.62,     5.51,     0.96,           0,      0.9,      0.12,      0.07,    1.85,     0.17,    6.31,     1.2,      0.39],
1, 0.0949711, 1.10836, 0.125191,  0.62835, 0.795584, 0.000380475, 0.384457, 0.0487723, 0.0832136, 9.59589, 0.193613, 6.44476,  1.5503, 0.0396956],
2, 0.0986913, 1.03437,    0.113, 0.602272, 0.777776, 0.000330413, 0.356996, 0.0449151,  0.073787, 8.54612, 0.170734, 6.31121,  1.5457, 0.0442966],
3, 0.0987575, 1.03327, 0.112816, 0.601914, 0.777528, 0.000329589, 0.356493,  0.044845, 0.0736198, 8.52355, 0.170125, 6.30892, 1.54556, 0.0444377],
4, 0.0987587, 1.03325, 0.112813, 0.601908, 0.777524, 0.000329574, 0.356484, 0.0448437, 0.0736169, 8.52316, 0.170115, 6.30888, 1.54556, 0.0444402],
5, 0.0987587, 1.03325, 0.112813, 0.601908, 0.777524, 0.000329574, 0.356484, 0.0448437, 0.0736169, 8.52316, 0.170115, 6.30888, 1.54556, 0.0444402],
6, 0.0987587, 1.03325, 0.112813, 0.601908, 0.777524, 0.000329574, 0.356484, 0.0448437, 0.0736169, 8.52316, 0.170115, 6.30888, 1.54556, 0.0444402],
7, 0.0987587, 1.03325, 0.112813, 0.601908, 0.777524, 0.000329574, 0.356484, 0.0448437, 0.0736168, 8.52315, 0.170114, 6.30888, 1.54556, 0.0444402],
8, 0.0987587, 1.03325, 0.112813, 0.601908, 0.777524, 0.000329574, 0.356484, 0.0448437, 0.0736168, 8.52315, 0.170114, 6.30888, 1.54556, 0.0444402],
9, 0.0987587, 1.03325, 0.112813, 0.601908, 0.777524, 0.000329574, 0.356484, 0.0448437, 0.0736168, 8.52315, 0.170114, 6.30888, 1.54556, 0.0444402],
0, 0.0987587, 1.03325, 0.112813, 0.601908, 0.777524, 0.000329574, 0.356484, 0.0448437, 0.0736168, 8.52315, 0.170114, 6.30888, 1.54556, 0.0444402]]



'''












